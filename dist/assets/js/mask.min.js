[].forEach.call(document.querySelectorAll('input[type="tel"]'),(function(e){let t;function s(e){e.keyCode&&(t=e.keyCode),this.selectionStart<3&&e.preventDefault();let s="+7 (___) ___-__-__",l=0,r=s.replace(/\D/g,""),i=this.value.replace(/\D/g,""),n=s.replace(/[_\d]/g,(function(e){return l<i.length?i.charAt(l++)||r.charAt(l):e}));l=n.indexOf("_"),-1!=l&&(l<5&&(l=3),n=n.slice(0,l));let o=s.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");o=new RegExp("^"+o+"$"),(!o.test(this.value)||this.value.length<5||t>47&&t<58)&&(this.value=n,$(this).css("border-bottom","1px solid red")),"blur"==e.type&&this.value.length<18&&(this.value="",$(this).css("border-bottom","1px solid red")),"mouseleave"==e.type&&this.value.length<18&&(this.value="",$(this).css("border-bottom","1px solid red")),(e.type=18===this.value.length)?$(this).css("border-bottom","1px solid #006994"):$(this).css("border-bottom","1px solid red")}e.addEventListener("input",s,!1),e.addEventListener("focus",s,!1),e.addEventListener("blur",s,!1),e.addEventListener("keydown",s,!1),e.addEventListener("mouseleave",s,!1)}));